<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Random Movie Generator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/modern-normalize/2.0.0/modern-normalize.min.css" />
  <link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap' rel='stylesheet'>
  <style>
    :root{
      --font-sans:'Inter',system-ui,sans-serif;
      --color-bg:#121212;
      --color-base:#1E1E1E;
      --color-accent:#2DD4BF;
      --color-text:#E5E7EB;
      --color-text-muted:#9CA3AF;
      --radius:0.5rem;
    }
    html{height:100%}
    body{
      height:100%;
      background:var(--color-bg);
      color:var(--color-text);
      font-family:var(--font-sans);
      margin:0;
      box-sizing:border-box;
      overflow:hidden;
    }
    .page-container{
      display:flex;
      flex-direction:column;
      align-items:center;
      width:100%;
      height:100vh;
    }
    h1{
      font-size:clamp(1.25rem,4vw,1.5rem);
      line-height:1.2;
      font-weight:400;
      color:var(--color-text);
      margin:0;
      text-align:center;
      padding:1rem 1rem .75rem;
      flex-shrink:0;
    }
    .main-content-wrapper {
      width: 100%;
      max-width: 320px;
      margin: 0 auto;
      padding: 0 1rem;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      flex: 1;
      min-height: 0;
    }
    #posterWrapper{
      background:var(--color-bg);
      border-radius:var(--radius);
      margin-bottom:0.75rem;
      position:relative;
      overflow:hidden;
      display:flex;
      justify-content:center;
      align-items:center;
      aspect-ratio:2/3;
      flex:1;
      min-height:0;
      width:auto;
      max-width:100%;
      align-self:center;
    }
    #loading-placeholder{
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--color-text-muted);
      font-size:.875rem;
      font-weight:600;
      position:absolute;
      top:0;
      left:0;
    }
    #filmstrip{
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
      transition:transform 2.5s cubic-bezier(.25,.1,.25,1);
    }
    #filmstrip .filmstrip-image{
      width:100%;
      height:100%;
      object-fit:contain;
      position:absolute;
    }
    .btn, #result, .controls {flex-shrink: 0;}
    .btn{
      display:block;
      width:100%;
      padding:.75rem;
      background:var(--color-accent);
      color:#121212;
      font-weight:600;
      border:none;
      border-radius:var(--radius);
      font-size:.875rem;
      transition:filter .2s,transform .1s;
      cursor:pointer;
      margin-bottom:1.5rem;
    }
    .btn:disabled{opacity:.6;cursor:default;}
    .btn:active,.btn:hover:not(:disabled),.btn:focus:not(:disabled){
      filter:brightness(.9);
      transform:translateY(-2px);
      outline:none;
    }
    .btn:active{transform:translateY(0);}
    #result{
      text-align:center;
      height:2.5rem;
      visibility:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    #movieResult{
      font-weight:600;
      font-size:.875rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      width:100%;
      max-width:clamp(240px,90vw,320px);
      box-sizing:border-box;
    }
    .controls{
      width:100%;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:.5rem;
      position:relative;
      margin-top:0.75rem;
    }
    #genreToggle, #streamLink {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.8rem;
      background: var(--color-base);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.2s ease;
      font-size:.875rem;
      font-weight:600;
      cursor:pointer;
      border-radius:var(--radius);
      color:var(--color-text);
      text-decoration:none;
    }
    #streamLink.hidden { visibility: hidden; }
    #genreToggle:hover, #streamLink:hover {
      background: rgba(45, 212, 191, 0.1);
      border-color: rgba(45, 212, 191, 0.5);
      transform: translateY(-2px);
      outline:none;
    }
    #genreToggle svg, #streamLink svg {stroke: var(--color-text-muted);transition: stroke 0.2s ease;}
    #genreToggle:hover svg, #streamLink:hover svg {stroke: var(--color-accent);}
    #genreModalContainer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 200ms ease}
    #genreModalContainer.open{opacity:1;pointer-events:auto}
    #genreOverlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);backdrop-filter:blur(4px)}
    #genreMenu{position:relative;background:var(--color-base);border-radius:var(--radius);width:90%;max-width:340px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.5);opacity: 0;transform: translateY(100px);transition: transform 300ms cubic-bezier(0.21, 0.6, 0.35, 1), opacity 300ms ease;}
    #genreModalContainer.open #genreMenu{opacity: 1;transform: translateY(0);}
    .genre-menu-header{padding:.5rem 1rem;border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:center;align-items:center;flex-shrink:0; position: relative;}
    .genre-menu-header h2{font-size:1rem;font-weight:600}
    .genre-menu-close {display: block;position: absolute;top: 50%;right: 0.25rem;transform: translateY(-50%);background: transparent;border: none;color: var(--color-text-muted);font-size: 1.75rem;line-height: 1;padding: 0.25rem 0.5rem;cursor: pointer;}
    .genre-menu-close:hover {color: var(--color-text);}
    #genreList{overflow-y:auto;padding:.5rem}
    .site-footer {
        width: 100%;
        margin: 0;
        padding: 0.25rem 1rem;
        box-sizing: border-box;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-end;
        gap: .5rem 1rem;
        color: var(--color-text-muted);
        flex-shrink: 0;
        font-size: clamp(.7rem, 2.5vw, .75rem);
    }
    .site-footer a{color:var(--color-text-muted);text-decoration:none}.site-footer a:hover{color:var(--color-accent);text-decoration:underline}.footer-center{flex-basis:100%;text-align:center}
    #genreList .item {padding: .45rem .75rem; display: flex; align-items: center; gap: .5rem; font-size: 0.875rem; font-weight: 400; color: var(--color-text-muted); cursor: pointer; position: relative; border-radius: .25rem; transition: background-color 0.2s ease, color 0.2s ease;}
    #genreList .item:not([data-genre="0"]):hover {background-color: rgba(255, 255, 255, 0.05);color: var(--color-text);}
    #genreList .item[data-genre="0"] {background-color: rgba(255, 255, 255, 0.03);border-bottom: 1px solid rgba(255, 255, 255, 0.1);font-weight: 600;color: var(--color-text);margin-bottom: 0.25rem;}
    #genreList .item[data-genre="0"] .check {display: none;}
    #genreMenu .check {visibility: hidden;color: var(--color-accent);font-weight: bold;}
    #genreMenu .item.selected {font-weight: 600;color: var(--color-text);}
    #genreMenu .item.selected .check {visibility: visible;}

    /* Mobile fix: prevent poster flex-grow on phones */
    @media (max-width: 767px) {
      #posterWrapper {
        flex: 0 0 auto;
      }
      .main-content-wrapper {
        flex: none;
      }
    }

    @media (min-width: 768px) {
      body {padding: 2rem; height:100%;}
      .page-container {justify-content: flex-start; height:100%;}
      h1 {position: relative; top:1rem; display:inline-block; margin-bottom:2rem; padding:0;}
      .main-content-wrapper {flex: initial; padding:0;}
      #posterWrapper {flex: initial; width:100%; max-width:320px; margin-bottom:1.5rem;}
      .btn {max-width:320px; margin-bottom:1.25rem;}
      #result {margin-bottom:1rem; height:auto;}
      .controls {width:100%; max-width:320px; margin-top:0;}
      .site-footer {flex-wrap:nowrap; align-items:flex-end; width:100%; max-width:320px; margin:auto auto 0; padding:0;}
      .genre-menu-close {display:none;}
      #genreOverlay,.genre-menu-header{display:none;}
      #genreModalContainer{position:static; opacity:1; pointer-events:auto; display:block;}
      #genreMenu{position:absolute; bottom:100%; right:100%; transform-origin:bottom right; margin-right:1rem; max-height:75vh; overflow-y:auto; box-shadow:0 4px 12px rgba(0,0,0,.5); opacity:0; transform:translateY(.5rem) scale(.95); pointer-events:none; transition:opacity 150ms ease, transform 150ms ease; width:auto; max-width:none;}
      #genreModalContainer.open #genreMenu{opacity:1; transform:translateY(0) scale(1); pointer-events:auto;}
      #genreList{padding:0.25rem;}
      #genreList .item{white-space:nowrap; padding:.45rem .75rem; gap:.5rem;}
      #genreList .item:hover{background:rgba(45,212,191,.1);}
      .site-footer .footer-center {flex-basis:auto; text-align:right;}
      .footer-right-stack {display:flex; flex-direction:column; align-items:flex-end; gap:0.25rem;}
    }
  </style>
</head>
<body>
  <div class="page-container">
    <h1>Random Movie Generator</h1>
    <div class="main-content-wrapper">
      <div id='posterWrapper'>
        <div id="loading-placeholder"><div>Loading movie...</div></div>
        <div id="filmstrip"></div>
      </div>
      <button id='randomizeBtn' class='btn' disabled>Randomize Movie</button>
      <div id='result'><div id='movieResult'></div></div>
      <div class='controls'>
        <!-- controls unchanged -->
      </div>
    </div>
    <footer class="site-footer">
      <!-- footer unchanged -->
    </footer>
  </div>
  <script src="data/initial-pool.js" defer></script>
  <script>
    // JavaScript unchanged
  </script>
</body>
</html>
