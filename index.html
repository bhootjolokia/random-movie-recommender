<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  
  <!-- SEO CHANGE: Title updated to match new H1 -->
  <title>Random Movie Picker | Find Your Next Movie to Watch</title>
  
  <meta name="description" content="Can't decide what to watch? The Random Film Picker is a free tool that gives you an instant movie suggestion. Filter by genre, get streaming links, and find your next movie to watch now!">
  <link rel="canonical" href="https://randomfilmpicker.com/" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://image.tmdb.org">
  
  <link rel="preload" as="image" href="https://image.tmdb.org/t/p/w500/8b8R8l88Qje9dn9OE8Yav5cK1m2.jpg">

  <style>
    /* --- Inlined modern-normalize.min.css v2.0.0 --- */
    :root{--color-accent:#2DD4BF;--color-base:#1E1E1E;--color-bg:#121212;--color-text:#E5E7EB;--color-text-muted:#9CA3AF;--font-sans:'Inter',system-ui,sans-serif;--radius:.5rem}*,::before,::after{box-sizing:border-box}html{font-family:system-ui,sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4}body{margin:0}hr{height:0;color:inherit}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}

    /* --- Inlined Google Fonts CSS for 'Inter' --- */
    /* latin-ext */
    @font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuU_oU_w.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}
    /* latin */
    @font-face{font-family:'Inter';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_oU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
    /* latin-ext */
    @font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuU_oU_w.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}
    /* latin */
    @font-face{font-family:'Inter';font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_oU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
    /* latin-ext */
    @font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuU_oU_w.woff2) format('woff2');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}
    /* latin */
    @font-face{font-family:'Inter';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/inter/v13/UcC73FwrK3iLTeHuS_oU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
    
    /* --- Your Application's CSS --- */
    html{height:100%}
    body{height:100%;background:var(--color-bg);color:var(--color-text);font-family:var(--font-sans);margin:0;box-sizing:border-box;overflow:hidden;padding:2rem 1rem 1rem}
    .page-container{display:flex;flex-direction:column;align-items:center;width:100%;height:100%;}
    h1{font-size:clamp(1.25rem,4vw,1.5rem);line-height:1.2;font-weight:400;color:var(--color-text);text-transform:none;letter-spacing:normal;margin:0;text-align:center;flex-shrink:0;padding:0 0 .75rem;}
    .main-content-wrapper {width: 100%;max-width: 320px;margin: 0 auto;padding: 0;box-sizing: border-box;}
    #posterWrapper {background: var(--color-bg);border-radius: var(--radius);position: relative;overflow: hidden;width: 100%;height: 0;padding-bottom: 150%;}
    #loading-placeholder, #filmstrip {position: absolute;top: 0;left: 0;width: 100%;height: 100%;}
    #loading-placeholder{display:flex;align-items:center;justify-content:center;color:var(--color-text-muted);font-size:.875rem;font-weight:600;}
    #filmstrip{transition:transform 2.5s cubic-bezier(.25,.1,.25,1)}
    .filmstrip-image {width: 100%;height: 100%;position: absolute;background-size: contain;background-repeat: no-repeat;background-position: center;}
    .actions-container {display: flex;flex-direction: column;width: 100%;flex-shrink: 0;max-width: 320px;padding: 0;box-sizing: border-box;margin-top: 0.75rem;}
    .btn, #result, .controls {flex-shrink: 0;}
    .btn{display:block;width:100%;padding:.75rem;background:var(--color-accent);color:#121212;font-weight:600;border:none;border-radius:var(--radius);font-size:.875rem;transition:filter .2s,transform .1s;cursor:pointer;margin-bottom:0.75rem}.btn:disabled{opacity:.6;cursor:default}.btn:active,.btn:hover:not(:disabled),.btn:focus:not(:disabled){filter:brightness(.9);transform:translateY(-2px);outline:none}.btn:active{transform:translateY(0)}
    #result{text-align:center;height:2.5rem;visibility:hidden;flex-shrink:0;display:flex;align-items:center;justify-content:center;}
    #movieResult{font-weight:600;font-size:.875rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;max-width:clamp(240px,90vw,320px);box-sizing:border-box}
    .controls{width:100%;display:flex;justify-content:space-between;flex-wrap:wrap;gap:.5rem;position:relative;margin-top:0.5rem;}
    #genreToggle, #streamLink {display: inline-flex;align-items: center;gap: 0.5rem;padding: 0.5rem 0.8rem;background: var(--color-base);border: 1px solid rgba(255, 255, 255, 0.1);transition: all 0.2s ease;font-size:.875rem;font-weight:600;cursor:pointer;border-radius:var(--radius);color:var(--color-text);text-decoration:none;}
    #streamLink.hidden { visibility: hidden; }
    #genreToggle:hover, #streamLink:hover {background: rgba(45, 212, 191, 0.1);border-color: rgba(45, 212, 191, 0.5);transform: translateY(-2px);outline:none;}
    #genreToggle svg, #streamLink svg {stroke: var(--color-text-muted);transition: stroke 0.2s ease;}
    #genreToggle:hover svg, #streamLink:hover svg {stroke: var(--color-accent);}
    #genreModalContainer{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity 200ms ease}
    #genreModalContainer.open{opacity:1;pointer-events:auto}
    #genreOverlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);backdrop-filter:blur(4px)}
    #genreMenu{position:relative;background:var(--color-base);border-radius:var(--radius);width:90%;max-width:340px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.5);opacity: 0;transform: translateY(100px);transition: transform 300ms cubic-bezier(0.21, 0.6, 0.35, 1), opacity 300ms ease;}
    #genreModalContainer.open #genreMenu{opacity: 1;transform: translateY(0);}
    .genre-menu-header{padding:.5rem 1rem;border-bottom:1px solid rgba(255,255,255,.1);display:flex;justify-content:center;align-items:center;flex-shrink:0; position: relative;}
    .genre-menu-header h2{font-size:1rem;font-weight:600}
    .genre-menu-close {display: block;position: absolute;top: 50%;right: 0.25rem;transform: translateY(-50%);background: transparent;border: none;color: var(--color-text-muted);font-size: 1.75rem;line-height: 1;padding: 0.25rem 0.5rem;cursor: pointer;}
    .genre-menu-close:hover {color: var(--color-text);}
    #genreList{overflow-y:auto;padding:.5rem}
    .site-footer {width: 100%;margin: auto 0 0;padding: 0.25rem 0;box-sizing: border-box;display: flex;justify-content: space-between;align-items: center;color: var(--color-text-muted);flex-shrink: 0;font-size: clamp(.7rem, 2.5vw, .75rem);}
    .site-footer a { color: var(--color-text-muted); text-decoration: none; }
    .site-footer a:hover { color: var(--color-accent); text-decoration: underline; }
    .footer-col-center { text-align: center; }
    .footer-col-right { text-align: right; }
    #genreList .item {padding: .45rem .75rem; display: flex; align-items: center; gap: .5rem; font-size: 0.875rem; font-weight: 400; color: var(--color-text-muted); cursor: pointer; position: relative; border-radius: .25rem; transition: background-color 0.2s ease, color 0.2s ease;}
    #genreList .item:not([data-genre="0"]):hover {background-color: rgba(255, 255, 255, 0.05);color: var(--color-text);}
    #genreList .item[data-genre="0"] {background-color: rgba(255, 255, 255, 0.03);border-bottom: 1px solid rgba(255, 255, 255, 0.1);font-weight: 600;color: var(--color-text);margin-bottom: 0.25rem;}
    #genreList .item[data-genre="0"] .check {display: none;}
    #genreMenu .check {visibility: hidden;color: var(--color-accent);font-weight: bold;}
    #genreMenu .item.selected {font-weight: 600;color: var(--color-text);}
    #genreMenu .item.selected .check {visibility: visible;}
    .btn:focus-visible, #genreToggle:focus-visible, #streamLink:focus-visible, .genre-menu-close:focus-visible {outline: 2px solid var(--color-accent); outline-offset: 2px;}
    @media (min-width: 768px) {
      body {padding: 2rem;}
      .page-container {padding-bottom: 1rem;}
      .main-content-block {display: flex;flex-direction: column;align-items: center;flex-grow: 1;justify-content: center;}
      h1 {display: inline-block;margin-bottom: 1.5rem;padding: 0;position: relative;top: 0.75rem;}
      .main-content-wrapper {padding: 0;display: block;}
      #posterWrapper {width: 320px;height: 480px;margin-bottom: 1.5rem;padding-bottom: 0;}
      .actions-container {max-width: 320px;padding: 0;margin-top: 0;}
      .btn {max-width: 320px;margin-bottom: 1.25rem;}
      #result {margin-bottom: 1rem;height: auto;}
      .controls {width: 100%;max-width: 320px;margin-top: 0;}
      .site-footer {width: 100%;margin: 0;padding: 0;}
      .genre-menu-close {display: none;}
      #genreOverlay,.genre-menu-header{display:none}
      #genreModalContainer{position:static;opacity:1;pointer-events:auto;display:block}
      #genreMenu{position:absolute;bottom:100%;right:100%;transform-origin:bottom right;margin-right:1rem;max-height: 75vh;overflow-y:auto;box-shadow:0 4px 12px rgba(0,0,0,.5);opacity:0;transform:translateY(.5rem) scale(.95);pointer-events:none;transition:opacity 150ms ease,transform 150ms ease;width:auto;max-width:none;}
      #genreModalContainer.open #genreMenu{opacity:1;transform:translateY(0) scale(1);pointer-events:auto;}
      #genreList{padding:0.25rem;}
      #genreList .item{white-space: nowrap;padding: .45rem .75rem;gap: .5rem;}
      #genreList .item:hover{background:rgba(45,212,191,.1)}
    }
  </style>
</head>
<body>
  <noscript>
    You need to enable JavaScript to run this app. The Random Movie Generator uses JavaScript to fetch and display movie suggestions for you to watch.
  </noscript>
  <div class="page-container">
    <div class="main-content-block">
      <!-- SEO CHANGE: H1 updated -->
      <h1>Random Movie Picker</h1>

      <!-- SEO CHANGE: Descriptive paragraph removed as requested -->

      <div class="main-content-wrapper">
        <div id='posterWrapper'>
          <div id="loading-placeholder"><div>Loading movie...</div></div>
          <div id="filmstrip"></div>
        </div>
      </div>
      <div class="actions-container">
          <button id='randomizeBtn' class='btn' disabled>Randomize Movie</button>
          <div id='result' aria-live="polite"><div id='movieResult'></div></div>
          <div class='controls'>
            <button id='genreToggle' aria-haspopup="true" aria-expanded="false" aria-controls="genreMenu">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 21v-7M4 10V3M12 21v-9M12 8V3M20 21v-5M20 12V3M2 14h4M10 8h4M18 16h4"/></svg>
                <span>Genres</span>
            </button>
            <a id='streamLink' href='#' target='_blank' class='hidden'>
                <span>Stream</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
            </a>
            <div id="genreModalContainer">
              <div id="genreOverlay"></div>
              <div id='genreMenu' role='menu'>
                <div class="genre-menu-header">
                  <h2>Select Genres</h2>
                  <button class="genre-menu-close" aria-label="Close">×</button>
                </div>
                <div id="genreList"></div>
              </div>
            </div>
          </div>
      </div>
    </div>
    <footer class="site-footer">
      <a href="https://www.termsfeed.com/live/e3bef525-0068-4ba5-a971-197cc99b0416" target="_blank" rel="noopener noreferrer" class="footer-col-left">Privacy Policy</a>
      <a href="mailto:movierandomizertool@gmail.com" class="footer-col-center">Contact Us</a>
      <div class="footer-col-right">Data by <a href="https://www.themoviedb.org" target="_blank">TMDb</a></div>
    </footer>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
    const TMDB_BASE = 'https://www.themoviedb.org/movie';
    const IMG_BASE = 'https://image.tmdb.org/t/p/';
    const SEEN_MOVIES_CAP = 50;
    const DEFAULT_MOVIE_ID = 693134;

    let movies = [], fullMovieList = [], selectedGenres = new Set([0]), isSpinning = false, seenMovies = [];
    const btn = document.getElementById('randomizeBtn'), res = document.getElementById('result'), txt = document.getElementById('movieResult'), genreToggle = document.getElementById('genreToggle'), streamLink = document.getElementById('streamLink'), filmstrip = document.getElementById('filmstrip'), loadingPlaceholder = document.getElementById('loading-placeholder'), genreModalContainer = document.getElementById('genreModalContainer'), genreMenu = document.getElementById('genreMenu'), genreList = document.getElementById('genreList'), genreOverlay = document.getElementById('genreOverlay'), genreMenuCloseBtn = document.querySelector('.genre-menu-close');
    const genreMap = {28:'Action',12:'Adventure',16:'Animation',35:'Comedy',80:'Crime',18:'Drama',10751:'Family',14:'Fantasy',36:'History',27:'Horror',10402:'Music',9648:'Mystery',10749:'Romance',878:'Science Fiction',10770:'TV Movie',53:'Thriller',10752:'War',37:'Western'};
    
    let isGenreMenuBuilt = false;
    function buildGenreMenu() {
      if (isGenreMenuBuilt) return;
      const sortedGenreList = Object.entries(genreMap).sort(([, nameA], [, nameB]) => nameA.localeCompare(nameB));
      sortedGenreList.unshift(['0', 'Any Genre']);
      sortedGenreList.forEach(([id,name]) => {
        const el = document.createElement('div'); el.className = 'item'; el.dataset.genre = id; el.setAttribute('role', 'menuitemradio');
        const check = document.createElement('span'); check.className = 'check'; check.innerHTML = '✓';
        const text = document.createElement('span'); text.textContent = name;
        el.appendChild(check); el.appendChild(text);
        el.addEventListener('click', (e) => {
          e.stopPropagation(); const genreId = +id;
          if (genreId === 0) { selectedGenres.clear(); selectedGenres.add(0); }
          else { selectedGenres.delete(0); if (selectedGenres.has(genreId)) { selectedGenres.delete(genreId); if (selectedGenres.size === 0) selectedGenres.add(0); } else { selectedGenres.add(genreId); } }
          updateGenreSelection(); randomize(); closeGenreMenu();
        });
        genreList.appendChild(el);
      });
      isGenreMenuBuilt = true;
    }

    function updateGenreSelection() { document.querySelectorAll('#genreList .item').forEach(i => { const isSelected = selectedGenres.has(+i.dataset.genre); i.classList.toggle('selected', isSelected); i.setAttribute('aria-checked', isSelected); }); }
    function closeGenreMenu() { genreModalContainer.classList.remove('open'); genreToggle.setAttribute('aria-expanded', 'false'); }
    
    genreToggle.addEventListener('click', (e) => { 
      e.stopPropagation(); buildGenreMenu(); const isOpening = !genreModalContainer.classList.contains('open');
      genreToggle.setAttribute('aria-expanded', isOpening); genreModalContainer.classList.toggle('open'); 
    });

    genreOverlay.addEventListener('click', closeGenreMenu);
    genreMenuCloseBtn.addEventListener('click', closeGenreMenu);
    document.addEventListener('click', (e) => { if (window.innerWidth >= 768 && !genreMenu.contains(e.target) && e.target !== genreToggle) { closeGenreMenu(); } });
    function formatMovie(movieData) { return { id: movieData.id, title: movieData.title, year: movieData.release_date ? movieData.release_date.slice(0, 4) : 'N/A', poster_path: movieData.poster_path, genre_ids: movieData.genre_ids, watch_link: movieData.watch_link }; }
    
    function createResponsivePosterHtml(path) {
        const imageUrl = `${IMG_BASE}w500${path}`;
        return `<div class="filmstrip-image" style="background-image: url('${imageUrl}')" role="img" aria-label="Movie poster"></div>`;
    }

    async function initializeApp() {
      btn.disabled = true;
      loadingPlaceholder.style.display = 'flex';
      try {
        const response = await fetch('data/movies.json');
        if (!response.ok) throw new Error('Could not load the movie list.');
        const rawMovieList = await response.json();
        movies = rawMovieList.map(formatMovie).filter(m => m.poster_path);
        fullMovieList = movies;
        if (movies.length === 0) { throw new Error('No movies with posters found.'); }
        
        let firstMovie = movies.find(m => m.id === DEFAULT_MOVIE_ID);
        if (!firstMovie) { firstMovie = movies[Math.floor(Math.random() * movies.length)]; }

        pickNewMovie(firstMovie);
        seenMovies.push(firstMovie);
        btn.disabled = false;
      } catch (err) {
        console.error(err);
        loadingPlaceholder.innerHTML = `<div>Oops! Could not load movies.</div>`;
      }
    }
    
    initializeApp();

    function pickNewMovie(movie) {
        loadingPlaceholder.style.display = 'none';
        if (!movie) { 
            filmstrip.innerHTML = ''; txt.textContent = 'No movies match the selected genres.'; streamLink.href = '#'; streamLink.classList.add('hidden'); res.style.visibility = 'visible'; btn.textContent = 'Reset'; 
            loadingPlaceholder.innerHTML = '<div>No movies found for this genre.</div>';
            loadingPlaceholder.style.display = 'flex';
            return;
        }
        btn.textContent = 'Randomize Movie';
        filmstrip.style.transition = 'none';
        filmstrip.innerHTML = createResponsivePosterHtml(movie.poster_path);
        filmstrip.style.transform = 'translateY(0)';
        txt.textContent = `${movie.title} (${movie.year})`;
        streamLink.href = movie.watch_link || `${TMDB_BASE}/${movie.id}/watch`;
        streamLink.classList.remove('hidden'); res.style.visibility = 'visible';
        if (!seenMovies.some(sm => sm.id === movie.id)) {
            seenMovies.unshift(movie);
            if (seenMovies.length > SEEN_MOVIES_CAP) seenMovies.pop();
        }
    }

    async function randomize() {
      if (isSpinning || movies.length === 0) return;
      isSpinning = true; btn.disabled = true;
      try {
        let pool = fullMovieList.filter(m => !seenMovies.some(sm => sm.id === m.id));
        if (pool.length === 0) {
            const currentMovieId = seenMovies[0]?.id; seenMovies = currentMovieId ? [{ id: currentMovieId }] : []; pool = fullMovieList.filter(m => m.id !== currentMovieId);
        }
        const fs = [...selectedGenres].filter(g => g !== 0);
        if (fs.length > 0) { pool = pool.filter(m => fs.every(g => m.genre_ids.includes(g))); }
        if (pool.length === 0) { pickNewMovie(null); return; }
        const winner = pool[Math.floor(Math.random() * pool.length)];
        await performFastSpin(winner);
        pickNewMovie(winner);
      } catch (error) {
          console.error("An error occurred during randomization:", error); txt.textContent = "Oops! Something went wrong."; pickNewMovie(seenMovies[0] || null);
      } finally {
          isSpinning = false; btn.disabled = false;
      }
    }

    async function performFastSpin(winner) {
      const stripLength = 30, poolSize = 15; let stripHTML = ''; const posterHeight = filmstrip.clientHeight; if (posterHeight === 0) return;
      const animationPool = [];
      for (let i = 0; i < poolSize; i++) { animationPool.push(fullMovieList[Math.floor(Math.random() * fullMovieList.length)]); }
      for (let i = 0; i < stripLength; i++) {
        const movieForStrip = animationPool[i % poolSize];
        const divHTML = createResponsivePosterHtml(movieForStrip.poster_path);
        stripHTML += divHTML.replace('style="', `style="top: ${i * 100}%; `);
      }
      const winnerDivHTML = createResponsivePosterHtml(winner.poster_path);
      stripHTML += winnerDivHTML.replace('style="', `style="top: ${stripLength * 100}%; `);
      filmstrip.style.transition = 'none'; filmstrip.style.transform = 'translateY(0)'; filmstrip.innerHTML = stripHTML;
      await new Promise(r => requestAnimationFrame(() => r()));
      txt.textContent = 'Finding a movie...';
      const finalPosition = -posterHeight * stripLength;
      filmstrip.style.transition = 'transform 2.5s cubic-bezier(.25,.1,.25,1)';
      filmstrip.style.transform = `translateY(${finalPosition}px)`;
      await new Promise(resolve => {
        const fallback = setTimeout(() => { console.warn('Animation fallback timer fired.'); resolve(); }, 2600);
        filmstrip.addEventListener('transitionend', () => { clearTimeout(fallback); resolve(); }, { once: true });
      });
    }
    
    btn.addEventListener('click', () => {
        if (btn.textContent === 'Reset') { selectedGenres.clear(); selectedGenres.add(0); updateGenreSelection(); randomize(); }
        else { randomize(); }
    });
  });
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
    // SEO CHANGE: Schema name updated
    "name": "Random Movie Picker",

    "description": "A tool to help you find a random movie to watch, with options to filter by genre.",
    "applicationCategory": "Entertainment",
    "operatingSystem": "Any (Web)",
    "offers": {
      "@type": "Offer",
      "price": "0"
    }
  }
  </script>
</body>
</html>
